<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
	<head>
		<title>Usage: How to launch the clerezza platform</title>
	</head>
	<body>
		<h1>Usage: How to launch the clerezza platform</h1>
		<p>Author: Daniel Spicar, Tsuyoshi Ito - clerezza.org</p>
		<p>Date: March 25, 2009</p>
		<h2 id="download">1. Download the launcher</h2>
		<p>
			The latest snapshots of the launcher can be found on:
            <br />
            <br />
			<a href="http://repo.trialox.org/snapshot/org/apache/clerezza/org.apache.clerezza.platform.launcher/" target="_blank">
               http://repo.trialox.org/snapshot/org/apache/clerezza/org.apache.clerezza.platform.launcher/
            </a>
            <br />
            <br />
			or get a stable release from:
            <br />
            <br />
			<a href="http://repo.trialox.org/release/org/apache/clerezza/org.apache.clerezza.platform.launcher/" target="_blank">
                http://repo.trialox.org/release/org/apache/clerezza/org.apache.clerezza.platform.launcher/
            </a>
            <br />
            <br />
			(e.g. org.apache.clerezza.platform.launcher-0.2-20090421.105711-13.jar from <a href="http://repo.trialox.org/snapshot/org/apache/clerezza/org.apache.clerezza.platform.launcher/0.2-SNAPSHOT/" target="_blank">
			http://repo.trialox.org/snapshot/org/apache/clerezza/org.apache.clerezza.platform.launcher/0.2-SNAPSHOT/
            </a>).
		</p>
		<h2 id="run">2. Run the platform</h2>
		<p>
            Execute the jar by typing
            the following into a console:
        </p>
		<pre>
            <code>$ java -Dorg.ops4j.pax.logging.DefaultServiceLog.level=ERROR -jar '/path/to/org.apache.clerezza.platform.launcher-0.2-20090421.105711-13.jar'</code>
        </pre>
		<p>
            This will launch the platform and send the logger output from the 
			level ERROR and above to the console.
            If problems are encountered, make sure the jar archive is executeable.
            In a desktop environment like Microsoft Windows it can be enough to
            double click the file in order to launch it.
            <br />
            If the platform was launched in the console, hit the return key to get a promt (->).
            The loaded bundles and their state can be checked by typing:
        </p>
		<pre>
            <code>
                -> ps
            </code>
        </pre>
        <p>
            The output should look like this:
        </p>
        <pre>
            <code>
                START LEVEL 30
                   ID   State         Level  Name
                [   0] [Active     ] [    0] System Bundle (1.4.1)
                [   1] [Resolved   ] [    1] Clerezza - Platform Security Conditions (0.2.0.SNAPSHOT)
                [   2] [Active     ] [    2] Apache Felix Bundle Repository (1.2.1)
                [   3] [Active     ] [    2] Apache Felix Configuration Admin Service (1.0.10)
                    ...
                    
                    
                <strong>[  28] [Active     ] [    3] Clerezza - Platform Account Control Panel (0.3.0.SNAPSHOT)</strong>
                <strong>[  29] [Active     ] [    3] Clerezza - Platform Content (0.7.0.SNAPSHOT)</strong>
                <strong>[  30] [Active     ] [    3] Clerezza - Platform Template Manager (0.2.0.SNAPSHOT)</strong>
                <strong>[  32] [Active     ] [    3] Clerezza - Platform Type Handler Space (0.2.0.SNAPSHOT)</strong>
                <strong>[  33] [Active     ] [    3] Clerezza - Platform Usermanager and Rolemanager (0.7.0.SNAPSHOT)</strong>
                    ...
                ->
            </code>
        </pre>
        <p>
            To see a list of available services type:
        </p>
        <pre>
            <code>
                -> scr list
            </code>
        </pre>
        <p>
            The output should look like this:
        </p>
        <pre>
            <code>
                   Id   State          Name
                [   0] [active       ] org.apache.clerezza.platform.security.PermissionManager
                [   1] [active       ] org.apache.clerezza.platform.security.auth.AuthenticatingFilter
                [   2] [active       ] org.apache.clerezza.jaxrs.rdf.providers.GraphReader
                [   3] [active       ] org.apache.clerezza.jaxrs.rdf.providers.GraphWriter


                    ...
                ->
            </code>
        </pre>
        <p>
            Now the platform can be accessed in a web browser by going to <i>http://localhost:8080/path_to_service/</i>, whereas <i>path_to_service</i> has to be replaced by the path to a service/module (when asked to authenticate use username "admin" and password "admin". The user account "admin" has all permissions).
            <br />Try the following modules:
        </p>
        <ul>
            <li><a href="http://localhost:8080/admin/user-manager/" target="_blank">http://localhost:8080/admin/user-manager/</a></li>
            <li><a href="http://localhost:8080/admin/role-manager/" target="_blank">http://localhost:8080/admin/role-manager/</a></li>
            <li><a href="http://localhost:8080/admin/template-manager/" target="_blank">http://localhost:8080/admin/template-manager/</a></li>
            <li>
                <a href="http://localhost:8080/user/admin/control-panel/" target="_blank">
                    http://localhost:8080/user/admin/control-panel/
                </a>
                  (where <i>admin</i> can be the username of an arbitary user)
            </li>
            <li><a href="http://localhost:8080/tools/editor/" target="_blank">http://localhost:8080/tools/editor/</a></li>
        </ul>
        <p>
            Check out the following sites for more information:
        </p>
        <ul>
            <li>
                <a href="http://clerezza.org/projects/org.apache.clerezza.platform.usermanager/" target="_blank">
                   http://clerezza.org/projects/org.apache.clerezza.platform.usermanager/
                </a>
            </li>
             <li><a href="http://clerezza.org/projects/org.apache.clerezza.platform.accountcontrolpanel/" target="_blank">http://clerezza.org/projects/org.apache.clerezza.platform.accountcontrolpanel/</a></li>
             <li><a href="http://clerezza.org/projects/org.apache.clerezza.platform.templating.manager/" target="_blank">http://clerezza.org/projects/org.apache.clerezza.platform.templating.manager/</a></li>
            <li><a href="http://clerezza.org/projects/org.apache.clerezza.platform.content/" target="_blank">http://clerezza.org/projects/org.apache.clerezza.platform.content/</a></li>
        </ul>
        <h2 id="shutdown">3. Shutdown the platform</h2>
        <p>
            The platform can be stopped by typing:
        </p>
            <pre>
                <code>
                    -> shutdown
                </code>
            </pre>

		<h2 id="shutdown">4. Felix webconsole</h2>
        <p>
            As an alternative to the command-line interface Felix also provides
			a web-based management interface available by default at
			<a href="http://localhost:8080/system/console">http://localhost:8080/system/console</a>.
			The port at which the console is accessible can be set with the
			<code>org.osgi.service.http.port</code> system property.
        </p>
		<pre>
            <code>$ java -Dorg.osgi.service.http.port=8383 -jar '/path/to/org.apache.clerezza.platform.launcher-0.2-20090421.105711-13.jar'</code>
        </pre>
		<p>
           Starting the platform as above the web-console will be available on
		   port 8383, note that this has no impact on the port of the plaftform's
		   webserver which by default listens to port 8080.
        </p>
    </body>
</html>

