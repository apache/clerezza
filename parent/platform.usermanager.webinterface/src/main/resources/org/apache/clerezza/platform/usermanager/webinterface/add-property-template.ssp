/*
 *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
*/

def umr(s: Any) = new UriRef("http://clerezza.org/2009/05/usermanager#" + s)

resultDocModifier.setTitle("Users");
resultDocModifier.addNodes2Elem("tx-module", <h1>Users</h1>);

resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li><a href="list-users">Users</a></li>);
resultDocModifier.addNodes2Elem("tx-module-tabs-ol", <li class="tx-active"><a href="list-roles">Roles</a></li>);

resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="deleteButton" class="tx-button tx-button-generic" href={"manage-custom-properties?role=" + (res/umr("role")*)}>Back to Custom Fields</a></li>);
resultDocModifier.addNodes2Elem("tx-contextual-buttons-ol", <li><a id="addButton" class="tx-button tx-button-create" href="#">Save</a></li>);


        <div id="tx-content">
			<script type="text/javascript">
				$(document).ready(function() {{
					$("#valueoption").val("single value");
					$("#add-custom-field-form2").hide();

					$("#addButton").bind("click", function() {{
						if($("#valueoption").val() == "single value") {{
							$("#add-custom-field-form1").submit();
						}} else {{
							$("#add-custom-field-form2").submit();
						}}
					}});

					$("#valueoption").change(function () {{
						if($("#valueoption").val() == "single value") {{
							$("#add-custom-field-form1").show();
							$("#add-custom-field-form2").hide();
						}} else {{
							$("#add-custom-field-form1").hide();
							$("#add-custom-field-form2").show();
						}}
					}});
				}});
			</script>

            <div class="tx-tree">
				<div class="tx-edit">
				<h3 class="tx-edit-header">{"Add Custom Field to " + (res/umr("role")*)}</h3>
				<br/>
				<form>
				<fieldset>
				<ol style="display: block;">
				<li class="tx-line" style="background-image: none">
						<label >Select Value Option:</label>
						<span class="tx-item">
							<select id="valueoption" size="1">
								<option>single value</option>
								 <option>multiple values</option>
							</select>
					</span>
				</li>
				</ol>
				</fieldset>
				</form>
				<br/>
				<form action="add-single-property" id="add-custom-field-form1" method="post"><fieldset>
				<input type="hidden" name="title" value={res/umr("role")*} />
				<ol style="display: block;">	
					<li class="tx-line" style="background-image: none">
						<label >Property:</label>
						<span class="tx-item">
							<input type="text" id="property" name="property" size="30" value=""/>&#160;Well-formed URI required&#160;(e.g. http://foo.bar)
						</span>
					</li>
					<li class="tx-line" style="background-image: none">
						<label >Label:</label>
						<span class="tx-item">
							<input id="label" name="label" type="text" value="" />
						</span>

					</li>
					<li class="tx-line" style="background-image: none">
						<label >Length:</label>
						<span class="tx-item">
							<input id="length" name="length" type="text" value="" />&#160;(e.g. 20)
						</span>
					</li>
				</ol>
				</fieldset>
				</form>
				<form action="add-multiple-property" id="add-custom-field-form2" method="post"><fieldset>
				<input type="hidden" name="title" value={res/umr("role")*} />
				<ol style="display: block;">


					<li class="tx-line" id="multiselect" style="background-image: none">
						<label >Select Option:</label>
						<span class="tx-item">
							<select name="multiselect" size="1">
								 <option>single</option>
								 <option>multiple</option>
							</select>
						</span>
					</li>
					<li class="tx-line" style="background-image: none">
						<label >Property:</label>
						<span class="tx-item">
							<input id="property" name="property" size="30" type="text" value="" />&#160;Well-formed URI required&#160;(e.g. http://foo.bar)
						</span>
					</li>
					<li class="tx-line" style="background-image: none">
						<label >Label:</label>
						<span class="tx-item">
							<input id="label" name="label" type="text" value="" />
						</span>
					</li>
					<li class="tx-line" style="background-image: none; height: 6em;">
						<label >Selectable Values:</label>
						<span class="tx-item">
							<textarea cols="20" rows="3" name="selectablevalues"></textarea>&#160;Separate values with a comma (,)
						</span>
					</li>
				</ol>
				</fieldset>
				</form>
            </div>
            </div>
        </div>
